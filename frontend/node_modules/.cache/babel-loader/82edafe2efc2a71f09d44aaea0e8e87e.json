{"remainingRequest":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/babel-loader/lib/index.js!/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/home/danijel/Documents/Workspace/KUM-web/frontend/src/middleware/authWRoleCheck.js","dependencies":[{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/src/middleware/authWRoleCheck.js","mtime":1555142337437},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1555505910712},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/babel-loader/lib/index.js","mtime":1555505902219},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1555505908748}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport { store } from \"@/store/index.js\";\nimport router from \"@/router/index.js\";\nexport default function auth(to, from, next) {\n  store.dispatch(\"authUser\").then(function () {\n    if (!store.state.userAuthenticated) {\n      router.push({\n        name: 'SignUp'\n      });\n      store.state.lastRoute = to;\n    } else if (!to.meta.allowedRoles.includes(store.state.user.role.roleLevel)) {\n      router.push({\n        name: 'Home'\n      });\n    } else {\n      next();\n    }\n  });\n}",{"version":3,"sources":["/home/danijel/Documents/Workspace/KUM-web/frontend/src/middleware/authWRoleCheck.js"],"names":["store","router","auth","to","from","next","dispatch","then","state","userAuthenticated","push","name","lastRoute","meta","allowedRoles","includes","user","role","roleLevel"],"mappings":";;AAAA,SAAQA,KAAR,QAAoB,kBAApB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,eAAe,SAASC,IAAT,CAAcC,EAAd,EAAkBC,IAAlB,EAAwBC,IAAxB,EAA8B;AACzCL,EAAAA,KAAK,CAACM,QAAN,CAAe,UAAf,EAA2BC,IAA3B,CAAgC,YAAM;AAClC,QAAI,CAACP,KAAK,CAACQ,KAAN,CAAYC,iBAAjB,EAAoC;AAChCR,MAAAA,MAAM,CAACS,IAAP,CAAY;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAZ;AACAX,MAAAA,KAAK,CAACQ,KAAN,CAAYI,SAAZ,GAAwBT,EAAxB;AACH,KAHD,MAGM,IAAG,CAACA,EAAE,CAACU,IAAH,CAAQC,YAAR,CAAqBC,QAArB,CAA8Bf,KAAK,CAACQ,KAAN,CAAYQ,IAAZ,CAAiBC,IAAjB,CAAsBC,SAApD,CAAJ,EAAmE;AACrEjB,MAAAA,MAAM,CAACS,IAAP,CAAY;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAZ;AACH,KAFK,MAED;AACDN,MAAAA,IAAI;AACP;AACJ,GATD;AAUD","sourcesContent":["import {store} from \"@/store/index.js\"\nimport router from \"@/router/index.js\"\n\nexport default function auth(to, from, next) {\n    store.dispatch(\"authUser\").then(() => {\n        if (!store.state.userAuthenticated) {\n            router.push({name: 'SignUp'})\n            store.state.lastRoute = to\n        }else if(!to.meta.allowedRoles.includes(store.state.user.role.roleLevel)){\n            router.push({name: 'Home'})\n        }else{\n            next()\n        }\n    })\n  }"]}]}