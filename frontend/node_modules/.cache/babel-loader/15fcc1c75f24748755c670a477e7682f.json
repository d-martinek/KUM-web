{"remainingRequest":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/babel-loader/lib/index.js!/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/home/danijel/Documents/Workspace/KUM-web/frontend/src/store/index.js","dependencies":[{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/src/store/index.js","mtime":1554063834694},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1549443809249},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/babel-loader/lib/index.js","mtime":1549443804466},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1549443808667}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _Promise from \"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport var store = new Vuex.Store({\n  state: {\n    navDrawer: false,\n    user: null,\n    userEmails: []\n  },\n  mutations: {\n    logoutUser: function logoutUser(state) {\n      axios.get(\"/api/logout\").then(function (res) {\n        if (res.data.success == true) {\n          state.user = null;\n        }\n      });\n    },\n    getEmails: function getEmails(state) {\n      axios.get(\"/api/emails\").then(function (res) {\n        if (res.data.success == true) {\n          state.userEmails = res.data.userEmails;\n        }\n      });\n    }\n  },\n  actions: {\n    authUser: function authUser(context) {\n      return new _Promise(function (resolve) {\n        if (!context.state.user) {\n          axios.get(\"/api/auth\").then(function (res) {\n            if (res.data.success == true) {\n              context.state.user = res.data.userData;\n            }\n\n            resolve(res);\n          }, function (error) {\n            resolve(error);\n          });\n        }\n      });\n    },\n    permissionAllowed: function permissionAllowed(context, permissionArray) {\n      if (context.state.user) {\n        return new _Promise(function (resolve) {\n          resolve(permissionArray.includes(context.state.user.role));\n        });\n      } else {\n        return true;\n      }\n    }\n  }\n});",{"version":3,"sources":["/home/danijel/Documents/Workspace/KUM-web/frontend/src/store/index.js"],"names":["Vue","Vuex","axios","use","store","Store","state","navDrawer","user","userEmails","mutations","logoutUser","get","then","res","data","success","getEmails","actions","authUser","context","resolve","userData","error","permissionAllowed","permissionArray","includes","role"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAF,GAAG,CAACG,GAAJ,CAAQF,IAAR;AAEA,OAAO,IAAMG,KAAK,GAAG,IAAIH,IAAI,CAACI,KAAT,CAAe;AAChCC,EAAAA,KAAK,EAAE;AACHC,IAAAA,SAAS,EAAE,KADR;AAEHC,IAAAA,IAAI,EAAE,IAFH;AAGHC,IAAAA,UAAU,EAAE;AAHT,GADyB;AAMhCC,EAAAA,SAAS,EAAE;AACPC,IAAAA,UADO,sBACIL,KADJ,EACW;AACdJ,MAAAA,KAAK,CAACU,GAAN,CAAU,aAAV,EACCC,IADD,CACM,UAAAC,GAAG,EAAI;AACT,YAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,IAAoB,IAAvB,EAA4B;AACxBV,UAAAA,KAAK,CAACE,IAAN,GAAa,IAAb;AACH;AACJ,OALD;AAMH,KARM;AASPS,IAAAA,SATO,qBASGX,KATH,EASU;AACbJ,MAAAA,KAAK,CAACU,GAAN,CAAU,aAAV,EACCC,IADD,CACM,UAAAC,GAAG,EAAI;AACT,YAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,IAAoB,IAAvB,EAA4B;AACxBV,UAAAA,KAAK,CAACG,UAAN,GAAmBK,GAAG,CAACC,IAAJ,CAASN,UAA5B;AACH;AACJ,OALD;AAMH;AAhBM,GANqB;AAwBhCS,EAAAA,OAAO,EAAE;AACLC,IAAAA,QADK,oBACIC,OADJ,EACa;AACd,aAAO,aAAY,UAAAC,OAAO,EAAI;AAC1B,YAAG,CAACD,OAAO,CAACd,KAAR,CAAcE,IAAlB,EAAuB;AACnBN,UAAAA,KAAK,CAACU,GAAN,CAAU,WAAV,EACCC,IADD,CACM,UAAAC,GAAG,EAAI;AACT,gBAAGA,GAAG,CAACC,IAAJ,CAASC,OAAT,IAAoB,IAAvB,EAA4B;AACxBI,cAAAA,OAAO,CAACd,KAAR,CAAcE,IAAd,GAAqBM,GAAG,CAACC,IAAJ,CAASO,QAA9B;AACH;;AACDD,YAAAA,OAAO,CAACP,GAAD,CAAP;AACH,WAND,EAMG,UAAAS,KAAK,EAAI;AACRF,YAAAA,OAAO,CAACE,KAAD,CAAP;AACH,WARD;AASH;AACJ,OAZM,CAAP;AAaH,KAfI;AAgBLC,IAAAA,iBAhBK,6BAgBaJ,OAhBb,EAgBsBK,eAhBtB,EAgBsC;AACvC,UAAGL,OAAO,CAACd,KAAR,CAAcE,IAAjB,EAAsB;AAClB,eAAO,aAAY,UAAAa,OAAO,EAAI;AAC1BA,UAAAA,OAAO,CAACI,eAAe,CAACC,QAAhB,CAAyBN,OAAO,CAACd,KAAR,CAAcE,IAAd,CAAmBmB,IAA5C,CAAD,CAAP;AACH,SAFM,CAAP;AAGH,OAJD,MAIK;AACD,eAAO,IAAP;AACH;AACJ;AAxBI;AAxBuB,CAAf,CAAd","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex)\n\nexport const store = new Vuex.Store({\n    state: {\n        navDrawer: false,\n        user: null,\n        userEmails: []\n    },\n    mutations: {\n        logoutUser(state) {\n            axios.get(\"/api/logout\")\n            .then(res => {\n                if(res.data.success == true){\n                    state.user = null\n                }\n            })\n        },\n        getEmails(state) {\n            axios.get(\"/api/emails\")\n            .then(res => {\n                if(res.data.success == true){\n                    state.userEmails = res.data.userEmails\n                }\n            })\n        }\n    },\n    actions: {\n        authUser(context) {\n            return new Promise(resolve => {\n                if(!context.state.user){\n                    axios.get(\"/api/auth\")\n                    .then(res => {\n                        if(res.data.success == true){\n                            context.state.user = res.data.userData\n                        }\n                        resolve(res)\n                    }, error => {\n                        resolve(error)\n                    })\n                }\n            })\n        },\n        permissionAllowed(context, permissionArray){\n            if(context.state.user){\n                return new Promise(resolve => {\n                    resolve(permissionArray.includes(context.state.user.role))\n                })\n            }else{\n                return true\n            }\n        }\n    }\n});"]}]}