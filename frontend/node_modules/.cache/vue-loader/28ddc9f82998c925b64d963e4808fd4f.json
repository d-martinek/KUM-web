{"remainingRequest":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/danijel/Documents/Workspace/KUM-web/frontend/src/components/dashboard/Events.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/src/components/dashboard/Events.vue","mtime":1555780273466},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1557082350867},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/babel-loader/lib/index.js","mtime":1557082335768},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1557082350867},{"path":"/home/danijel/Documents/Workspace/KUM-web/frontend/node_modules/vue-loader/lib/index.js","mtime":1557082351628}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from 'axios'\nimport getFBEvents from \"@/components/dashboard/GetFBEvents.vue\"\n\nexport default {\n\tcomponents: {\n\t\tgetFBEvents\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpermission: false,\n\t\t\tsearch: '',\n\t\t\tdeleteEvent: {\n\t\t\t\tdialog: false,\n\t\t\t\teventId: null,\n                name: null,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tdeleteDialog: false,\n\t\t\t\tselected: [],\n\t\t\t\teventIds: [],\n\t\t\t\theaders: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Naziv',\n\t\t\t\t\t\tvalue: 'name'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Dolazi',\n\t\t\t\t\t\tvalue: 'attendingCount'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Zainteresirano',\n\t\t\t\t\t\tvalue: 'interestedCount'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Početak',\n\t\t\t\t\t\tvalue: 'startTime'\n                    },\n                    {\n\t\t\t\t\t\ttext: 'Završetak',\n\t\t\t\t\t\tvalue: 'endTime'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Status',\n\t\t\t\t\t\tvalue: 'publishStatus'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: '',\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tsortable: false\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\titems: []\n\t\t\t},    \n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$store.dispatch('permissionAllowed', [0, 1, 2, 3]).then(\n\t\t\tperm => {\n\t\t\t\tthis.permission = perm\n\t\t\t\treturn this.permission\n\t\t\t}\n\t\t)\n\n\n\t\taxios.get('/api/events')\n\t\t.then(res => {\n\t\t\tif(res.data.success == true){\n\t\t\t\tthis.events.items = res.data.events\n\t\t\t}\n\t\t})\n\t},\n\tmethods: {\n\t\tupdateEvents(){\n\t\t\taxios.get('/api/events')\n\t\t\t.then(res => {\n\t\t\t\tif(res.data.success == true){\n\t\t\t\t\tthis.events.items = res.data.events\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tdeleteDialog(id, name) {\n\t\t\tthis.deleteEvent.dialog = true\n\t\t\tthis.deleteEvent.eventId = id\n\t\t\tthis.deleteEvent.name = name\n\t\t},\n\n\t\tresetDeleteDialog(){\n\t\t\tthis.deleteEvent.dialog = false\n\t\t\tthis.deleteEvent.eventId = null\n\t\t\tthis.deleteEvent.name = null\n\t\t},\n\n\t\tdeleteEventFunction() {\n\t\t\taxios.get('/api/event/' + this.deleteEvent.eventId + '/delete')\n\t\t\t.then(res => {\n\t\t\t\tif(res.data.success == true){\n\t\t\t\t\tthis.events.items = res.data.events\n\n\t\t\t\t\tthis.resetDeleteDialog()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\n\n\t\tmultiDeleteDialog() {\n\t\t\tthis.events.deleteDialog = true\n\t\t\tthis.events.eventIds = []\n\t\t\t\n\t\t\tthis.events.selected.forEach(event => {\n\t\t\t\tthis.events.eventIds.push(event._id)\n\t\t\t})\n\n\t\t},\n\n\t\tresetMultiDeleteDialog() {\n\t\t\tthis.events.deleteDialog = false\n\t\t\tthis.events.selected = []\n\t\t\tthis.events.eventIds = []\n\t\t},\n\n\t\tmultiDelete() {\n\t\t\taxios.post('/api/events/multidelete', {\n\t\t\t\tevents: this.events.eventIds\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif(res.data.success == true){\n\t\t\t\t\tthis.events.items = res.data.events\n\n\t\t\t\t\tthis.resetMultiDeleteDialog()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n};\n",{"version":3,"sources":["Events.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Events.vue","sourceRoot":"src/components/dashboard","sourcesContent":["<template>\n\t<div id=\"eventTable\" style=\"width: 100%;\">\n\t\t<v-container grid-list-xl fluid>\n\t\t\t<v-layout row wrap>\n\t\t\t\t<v-flex sm10>\n\t\t\t\t\t<h3>Događaji</h3>\n\t\t\t\t</v-flex>\n\t\t\t\t<v-flex sm2>\n\t\t\t\t\t<getFBEvents @updateEvents=\"updateEvents\"></getFBEvents>\n\t\t\t\t</v-flex>      \n\t\t\t\t<v-flex lg12>\n\t\t\t\t\t<v-card>\n\t\t\t\t\t\t<v-toolbar card color=\"gray\">\n\t\t\t\t\t\t\t<v-text-field\n\t\t\t\t\t\t\tflat\n\t\t\t\t\t\t\tsolo\n\t\t\t\t\t\t\tprepend-icon=\"search\"\n\t\t\t\t\t\t\tplaceholder=\"Pretraži\"\n\t\t\t\t\t\t\tv-model=\"search\"\n\t\t\t\t\t\t\thide-details\n\t\t\t\t\t\t\tclass=\"hidden-sm-and-down\"\n\t\t\t\t\t\t\t></v-text-field>\n\t\t\t\t\t\t\t<v-btn v-if=\"events.selected[0]\" color=\"error darken-2\" @click=\"multiDeleteDialog\">\n\t\t\t\t\t\t\t\tIzbriši označeno\n\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t<v-btn icon>\n\t\t\t\t\t\t\t\t<v-icon>filter_list</v-icon>\n\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t</v-toolbar>\n\t\t\t\t\t\t<v-divider></v-divider>\n\t\t\t\t\t\t<v-card-text class=\"pa-0\">\n\t\t\t\t\t\t\t<v-data-table\n\t\t\t\t\t\t\t\t:headers=\"events.headers\"\n\t\t\t\t\t\t\t\t:search=\"search\"\n\t\t\t\t\t\t\t\t:items=\"events.items\"\n\t\t\t\t\t\t\t\t:rows-per-page-items=\"[10,25,50,{text:'All','value':-1}]\"\n\t\t\t\t\t\t\t\tclass=\"elevation-1\"\n\t\t\t\t\t\t\t\titem-key=\"_id\"\n\t\t\t\t\t\t\t\tselect-all\n\t\t\t\t\t\t\t\tv-model=\"events.selected\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template slot=\"items\" slot-scope=\"props\">\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<v-checkbox\n\t\t\t\t\t\t\t\t\t\t\tprimary\n\t\t\t\t\t\t\t\t\t\t\thide-details\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"props.selected\"\n\t\t\t\t\t\t\t\t\t\t></v-checkbox>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>{{ props.item.name }}</td>\n\t\t\t\t\t\t\t\t\t<td>{{ props.item.attendingCount }}</td>\n\t\t\t\t\t\t\t\t\t<td>{{ props.item.interestedCount }}</td>\n\t\t\t\t\t\t\t\t\t<td>{{ props.item.startTime | moment(\"DD.MM.YYYY, H:mm\") }}</td>\n                                    <td>{{ props.item.endTime | moment(\"DD.MM.YYYY, H:mm\") }}</td>\n\t\t\t\t\t\t\t\t\t<td>{{ props.item.publishStatus }}</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"permission\">\n\t\t\t\t\t\t\t\t\t\t\t<router-link tag=\"span\" :to=\"'/dashboard/event/' + props.item._id + '/edit'\">\n\t\t\t\t\t\t\t\t\t\t\t\t<v-btn depressed icon dark small>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<v-icon>edit</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t\t\t\t\t<v-btn @click=\"deleteDialog(props.item._id, props.item.name)\" depressed icon dark small>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-icon>delete</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<router-link tag=\"span\" :to=\"'/dashboard/event/' + props.item._id\">\n\t\t\t\t\t\t\t\t\t\t\t<v-btn depressed icon dark small>\n\t\t\t\t\t\t\t\t\t\t\t\t<v-icon>remove_red_eye</v-icon>\n\t\t\t\t\t\t\t\t\t\t\t</v-btn>\n\t\t\t\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</v-data-table>\n\t\t\t\t\t\t</v-card-text>\n\t\t\t\t\t</v-card>\n\t\t\t\t</v-flex>  \n\n\t\t\t</v-layout>\n\t\t</v-container>\n\n\t\t<v-dialog v-model=\"deleteEvent.dialog\" width=\"500\">\n\t\t\t<v-card>\n\t\t\t\t<div style=\"text-align: center;\">\n\t\t\t\t\t<v-icon style=\"font-size: 10em; padding: 0.2em;\" color=\"error darken-2\">error_outline</v-icon>\n\t\t\t\t\t<div class=\"subheading\">Jeste li sigurni da želite obrisati događaj {{ deleteEvent.name }}?</div>\n\t\t\t\t</div>\n\t\t\t\t<br>\n\t\t\t\t<v-card-actions>\n\t\t\t\t\t<v-spacer></v-spacer>\n\n\t\t\t\t\t<v-btn color=\"error darken-2\" @click=\"deleteEventFunction\">\n\t\t\t\t\t\tDA\n\t\t\t\t\t</v-btn>\n\t\t\t\t\t<v-btn @click=\"resetDeleteDialog\">\n\t\t\t\t\t\tNE\n\t\t\t\t\t</v-btn>\n\t\t\t\t</v-card-actions>\n\t\t\t</v-card>\n\t\t</v-dialog>\n\n\t\t<v-dialog v-model=\"events.deleteDialog\" width=\"500\">\n\t\t\t<v-card>\n\t\t\t\t<div style=\"text-align: center;\">\n\t\t\t\t\t<v-icon style=\"font-size: 10em; padding: 0.2em;\" color=\"error darken-2\">error_outline</v-icon>\n\t\t\t\t\t<div class=\"subheading\">Jeste li sigurni da želite obrisati označene događaje?</div>\n\t\t\t\t</div>\n\t\t\t\t<br>\n\t\t\t\t<v-card-actions>\n\t\t\t\t\t<v-spacer></v-spacer>\n\n\t\t\t\t\t<v-btn color=\"error darken-2\" @click=\"multiDelete\">\n\t\t\t\t\t\tDA\n\t\t\t\t\t</v-btn>\n\t\t\t\t\t<v-btn @click=\"events.deleteDialog = false\">\n\t\t\t\t\t\tNE\n\t\t\t\t\t</v-btn>\n\t\t\t\t</v-card-actions>\n\t\t\t</v-card>\n\t\t</v-dialog>\n\t</div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport getFBEvents from \"@/components/dashboard/GetFBEvents.vue\"\n\nexport default {\n\tcomponents: {\n\t\tgetFBEvents\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpermission: false,\n\t\t\tsearch: '',\n\t\t\tdeleteEvent: {\n\t\t\t\tdialog: false,\n\t\t\t\teventId: null,\n                name: null,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tdeleteDialog: false,\n\t\t\t\tselected: [],\n\t\t\t\teventIds: [],\n\t\t\t\theaders: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Naziv',\n\t\t\t\t\t\tvalue: 'name'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Dolazi',\n\t\t\t\t\t\tvalue: 'attendingCount'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Zainteresirano',\n\t\t\t\t\t\tvalue: 'interestedCount'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Početak',\n\t\t\t\t\t\tvalue: 'startTime'\n                    },\n                    {\n\t\t\t\t\t\ttext: 'Završetak',\n\t\t\t\t\t\tvalue: 'endTime'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'Status',\n\t\t\t\t\t\tvalue: 'publishStatus'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: '',\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\tsortable: false\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\titems: []\n\t\t\t},    \n\t\t}\n\t},\n\tmounted() {\n\t\tthis.$store.dispatch('permissionAllowed', [0, 1, 2, 3]).then(\n\t\t\tperm => {\n\t\t\t\tthis.permission = perm\n\t\t\t\treturn this.permission\n\t\t\t}\n\t\t)\n\n\n\t\taxios.get('/api/events')\n\t\t.then(res => {\n\t\t\tif(res.data.success == true){\n\t\t\t\tthis.events.items = res.data.events\n\t\t\t}\n\t\t})\n\t},\n\tmethods: {\n\t\tupdateEvents(){\n\t\t\taxios.get('/api/events')\n\t\t\t.then(res => {\n\t\t\t\tif(res.data.success == true){\n\t\t\t\t\tthis.events.items = res.data.events\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tdeleteDialog(id, name) {\n\t\t\tthis.deleteEvent.dialog = true\n\t\t\tthis.deleteEvent.eventId = id\n\t\t\tthis.deleteEvent.name = name\n\t\t},\n\n\t\tresetDeleteDialog(){\n\t\t\tthis.deleteEvent.dialog = false\n\t\t\tthis.deleteEvent.eventId = null\n\t\t\tthis.deleteEvent.name = null\n\t\t},\n\n\t\tdeleteEventFunction() {\n\t\t\taxios.get('/api/event/' + this.deleteEvent.eventId + '/delete')\n\t\t\t.then(res => {\n\t\t\t\tif(res.data.success == true){\n\t\t\t\t\tthis.events.items = res.data.events\n\n\t\t\t\t\tthis.resetDeleteDialog()\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\n\n\t\tmultiDeleteDialog() {\n\t\t\tthis.events.deleteDialog = true\n\t\t\tthis.events.eventIds = []\n\t\t\t\n\t\t\tthis.events.selected.forEach(event => {\n\t\t\t\tthis.events.eventIds.push(event._id)\n\t\t\t})\n\n\t\t},\n\n\t\tresetMultiDeleteDialog() {\n\t\t\tthis.events.deleteDialog = false\n\t\t\tthis.events.selected = []\n\t\t\tthis.events.eventIds = []\n\t\t},\n\n\t\tmultiDelete() {\n\t\t\taxios.post('/api/events/multidelete', {\n\t\t\t\tevents: this.events.eventIds\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tif(res.data.success == true){\n\t\t\t\t\tthis.events.items = res.data.events\n\n\t\t\t\t\tthis.resetMultiDeleteDialog()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n};\n</script>"]}]}